% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/prepare_EC_data.R
\name{prepare_EC_data}
\alias{prepare_EC_data}
\title{Prepare Eddy Covariance Data for Footprint Calculation}
\usage{
prepare_EC_data(
  ec_data,
  blh_data,
  datetime_col = "datetime",
  required_vars = c("wind_speed", "v_var", "u*", "wind_dir", "blh", "L"),
  na_value = -9999,
  filter_start_date = NULL,
  filter_end_date = NULL
)
}
\arguments{
\item{ec_data}{Data frame containing eddy covariance measurements with columns
for datetime, wind_speed, v_var, u*, wind_dir, and L (Obukhov length).}

\item{blh_data}{Data frame containing boundary layer height from ERA5 with
columns for datetime and blh.}

\item{datetime_col}{Character string specifying the name of the datetime column.
Default is "datetime".}

\item{required_vars}{Character vector of required variable names. Default is
c("wind_speed", "v_var", "u*", "wind_dir", "blh", "L").}

\item{na_value}{Numeric value to convert to NA. Default is -9999.}

\item{filter_start_date}{Date or character. Optional. Filter data to dates >= this value.
Format: "YYYY-MM-DD". Default is NULL (no filtering).}

\item{filter_end_date}{Date or character. Optional. Filter data to dates <= this value.
Format: "YYYY-MM-DD". Default is NULL (no filtering).}
}
\value{
A data frame with merged EC and BLH data, with missing values properly
  handled, filtered by date range if specified, and only complete cases retained.
}
\description{
Merges eddy covariance data with boundary layer height data, handles missing
values, filters by date range, and ensures required variables are present for
footprint calculations.
}
\examples{
\dontrun{
# Load example data
data(ec_data_example)
data(blh_data_example)

# Prepare data for footprint calculation
ec_clean <- prepare_EC_data(
  ec_data = ec_data_example,
  blh_data = blh_data_example,
  datetime_col = "datetime"
)

# Prepare data with date filtering
ec_clean <- prepare_EC_data(
  ec_data = ec_data_example,
  blh_data = blh_data_example,
  filter_start_date = "2020-05-01",
  filter_end_date = "2020-05-31"
)
}
}
